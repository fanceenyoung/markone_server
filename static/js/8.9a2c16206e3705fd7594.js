webpackJsonp([8],{ZukU:function(s,n){},sh6l:function(s,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i("mvHQ"),e=i.n(a),t=i("PHrY"),o={data:function(){return{nickname:null,email:null,password:null,signinEmail:null,signinPassword:null,state:1,warning:null,eye:!1,timer:!0,resetPassword:null,forgetCode:null,click:!1,googleSignInParams:{client_id:"728616517590-om5s9j1llfcbaru8t5al706r2tu5faqo.apps.googleusercontent.com"},reg:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/}},methods:{signup:function(){var s=this;if(this.nickname&&this.email&&this.password&&-1!==this.warning.indexOf("normal")){var n={nickname:this.nickname,email:this.email,password:this.password};Object(t.k)(n).then(function(n){201===n.status&&(s.reset(),s.$store.commit({type:"SET_USER_INFO",info:e()(n.data)}),s.$router.push("/notes"))})}else alert("Please make sure your information is complete and correct!")},signin:function(){var s=this;if(this.signinEmail&&this.signinPassword&&-1!==this.warning.indexOf("normal")){var n={email:this.signinEmail,password:this.signinPassword};Object(t.i)(n).then(function(n){200===n.status&&(s.$store.commit({type:"SET_USER_INFO",info:e()(n.data)}),s.$router.push("/notes"))}).catch(function(){s.warning="signinP"})}else alert("Please make sure your information is complete and correct!")},onSignInSuccess:function(s){var n=this,i=s.getBasicProfile(),a={email:i.getEmail(),name:i.getName(),avatar:i.getImageUrl(),token:s.getAuthResponse().id_token};Object(t.g)(a).then(function(s){200===s.status&&(n.$store.commit({type:"SET_USER_INFO",info:e()(s.data)}),n.$router.push("/notes"))})},onSignInError:function(s){console.log("OH NOES",s)},checkEmail:function(){var s=this;this.reg.test(this.email)?this.timer&&(this.timer=!1,setTimeout(function(){Object(t.a)({email:s.email}).then(function(n){n.data.result?s.warning="email":s.warning="normalEmail"}),s.timer=!0},1e3)):this.warning="email"},checkPassword:function(s){var n=this;this.timer&&(this.timer=!1,setTimeout(function(){1===s&&n.password.length<=6||2===s&&n.resetPassword.length<=6?n.warning="password":n.warning="normalPassword",n.timer=!0},500))},checkSignEmail:function(){this.reg.test(this.signinEmail)?(this.click=!1,this.warning="normalSigninE"):this.warning="signinE"},checkSignPassword:function(){var s=this;this.timer&&(this.timer=!1,setTimeout(function(){s.signinPassword.length<=6?s.warning="signinP":s.warning="normalSigninP",s.timer=!0},500))},checkCode:function(){this.forgetCode.length>=8&&(this.warning="normalCode")},sendEmail:function(){var s=this;this.signinEmail&&-1!==this.warning.indexOf("normal")&&!this.click&&(this.click=!0,Object(t.h)({email:this.signinEmail}).then(function(s){s.data&&alert(s.data.msg)}).catch(function(){s.warning="signinE",alert("This email has not signed in.")}))},toReset:function(){this.forgetCode&&this.signinEmail&&"signinE"!==this.warning&&"code"!==this.warning&&(this.state=3)},resetPass:function(){var s=this,n={email:this.signinEmail,code:this.forgetCode,password:this.resetPassword};Object(t.b)(n).then(function(n){n.data&&s.$router.push("/notes")}).catch(function(){s.state=2,s.warning="code",alert("Email and code not match.")})},reset:function(s){this.nickname=null,this.email=null,this.password=null,this.signinEmail=null,this.signinPassword=null,this.warning=null,this.state=s}}},r={render:function(){var s=this,n=s.$createElement,i=s._self._c||n;return i("div",{staticClass:"sign"},[i("div",{staticClass:"sign-box"},[i("div",{staticClass:"sign-box-title"},[i("span",{staticClass:"sign-box-title-text"},[s._v(s._s(0===s.state?"Join Mark One":1===s.state?"Sign in":2===s.state?"Forgot Password":"Reset password"))])]),s._v(" "),0===s.state||1===s.state?i("g-signin-button",{staticClass:"sign-box-google",attrs:{params:s.googleSignInParams},on:{success:s.onSignInSuccess,error:s.onSignInError}},[i("span",{staticClass:"sign-box-google-icon"},[i("icon-svg",{attrs:{"icon-class":"google"}})],1),s._v(" "),i("div",{staticClass:"sign-box-google-text"},[s._v("Sign in with Google")])]):s._e(),s._v(" "),0===s.state||1===s.state?i("div",{staticClass:"sign-box-other"},[i("span",{staticClass:"sign-box-other-border left"}),s._v(" "),i("p",{staticClass:"sign-box-other-text"},[s._v("or")]),s._v(" "),i("span",{staticClass:"sign-box-other-border right"})]):s._e(),s._v(" "),s.state>=2?i("div",{staticClass:"sign-box-tip"},[2===s.state?i("p",[s._v("Please provide your email address you used. We will send you an email within a code to reset your password, if it exists in our system.")]):s._e(),s._v(" "),3===s.state?i("p",[s._v("Please type in your new password.")]):s._e()]):s._e(),s._v(" "),0===s.state?i("div",{staticClass:"sign-box-form"},[i("div",{staticClass:"sign-box-form-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.nickname,expression:"nickname"}],attrs:{type:"text",name:"",placeholder:"Nickname"},domProps:{value:s.nickname},on:{input:function(n){n.target.composing||(s.nickname=n.target.value)}}})]),s._v(" "),i("div",{staticClass:"sign-box-form-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.email,expression:"email"}],class:"email"===s.warning?"warning":"normalEmail"===s.warning?"normal":"",attrs:{type:"email",name:"",placeholder:"Email"},domProps:{value:s.email},on:{input:[function(n){n.target.composing||(s.email=n.target.value)},s.checkEmail]}})]),s._v(" "),i("div",{staticClass:"sign-box-form-input"},["checkbox"==(s.eye?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],class:"password"===s.warning?"warning":"normalPassword"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{input:function(n){s.checkPassword(1)},change:function(n){var i=s.password,a=n.target,e=!!a.checked;if(Array.isArray(i)){var t=s._i(i,null);a.checked?t<0&&(s.password=i.concat([null])):t>-1&&(s.password=i.slice(0,t).concat(i.slice(t+1)))}else s.password=e}}}):"radio"==(s.eye?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],class:"password"===s.warning?"warning":"normalPassword"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{input:function(n){s.checkPassword(1)},change:function(n){s.password=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],class:"password"===s.warning?"warning":"normalPassword"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:s.eye?"text":"password"},domProps:{value:s.password},on:{input:[function(n){n.target.composing||(s.password=n.target.value)},function(n){s.checkPassword(1)}]}}),s._v(" "),i("span",{staticClass:"sign-box-form-input-icon",on:{click:function(n){s.eye=!s.eye}}},[i("icon-svg",{attrs:{"icon-class":s.eye?"eye":"no-eye"}})],1)]),s._v(" "),i("div",{staticClass:"sign-box-form-warning signup"},["email"===s.warning?i("p",[i("span",{staticClass:"sign-box-form-warning-icon"},[i("icon-svg",{attrs:{"icon-class":"warning"}})],1),s._v(" "),i("span",{staticClass:"sign-box-form-warning-text"},[s._v("Invalid email address")])]):s._e(),s._v(" "),"password"===s.warning?i("p",[i("span",{staticClass:"sign-box-form-warning-icon"},[i("icon-svg",{attrs:{"icon-class":"warning"}})],1),s._v(" "),i("span",{staticClass:"sign-box-form-warning-text"},[s._v("Please use 6+ characters")])]):s._e()])]):s._e(),s._v(" "),1===s.state?i("div",{staticClass:"sign-box-form signin"},[i("div",{staticClass:"sign-box-form-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.signinEmail,expression:"signinEmail"}],class:"signinE"===s.warning?"warning":"normalSigninE"===s.warning?"normal":"",attrs:{type:"email",name:"",placeholder:"Email"},domProps:{value:s.signinEmail},on:{input:[function(n){n.target.composing||(s.signinEmail=n.target.value)},s.checkSignEmail]}})]),s._v(" "),i("div",{staticClass:"sign-box-form-input"},["checkbox"==(s.eye?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:s.signinPassword,expression:"signinPassword"}],class:"signinP"===s.warning?"warning":"normalSigninP"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:"checkbox"},domProps:{checked:Array.isArray(s.signinPassword)?s._i(s.signinPassword,null)>-1:s.signinPassword},on:{input:s.checkSignPassword,change:function(n){var i=s.signinPassword,a=n.target,e=!!a.checked;if(Array.isArray(i)){var t=s._i(i,null);a.checked?t<0&&(s.signinPassword=i.concat([null])):t>-1&&(s.signinPassword=i.slice(0,t).concat(i.slice(t+1)))}else s.signinPassword=e}}}):"radio"==(s.eye?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:s.signinPassword,expression:"signinPassword"}],class:"signinP"===s.warning?"warning":"normalSigninP"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:"radio"},domProps:{checked:s._q(s.signinPassword,null)},on:{input:s.checkSignPassword,change:function(n){s.signinPassword=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:s.signinPassword,expression:"signinPassword"}],class:"signinP"===s.warning?"warning":"normalSigninP"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:s.eye?"text":"password"},domProps:{value:s.signinPassword},on:{input:[function(n){n.target.composing||(s.signinPassword=n.target.value)},s.checkSignPassword]}}),s._v(" "),i("span",{staticClass:"sign-box-form-input-icon",on:{click:function(n){s.eye=!s.eye}}},[i("icon-svg",{attrs:{"icon-class":s.eye?"eye":"no-eye"}})],1)]),s._v(" "),i("div",{staticClass:"sign-box-form-tip"},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(n){s.reset(2)}}},[s._v("Forgot password?")])]),s._v(" "),i("div",{staticClass:"sign-box-form-warning signin"},["signinP"===s.warning?i("p",[i("span",{staticClass:"sign-box-form-warning-icon"},[i("icon-svg",{attrs:{"icon-class":"warning"}})],1),s._v(" "),i("span",{staticClass:"sign-box-form-warning-text"},[s._v("Incorrect email or password")])]):s._e()])]):s._e(),s._v(" "),2===s.state?i("div",{staticClass:"sign-box-form"},[i("div",{staticClass:"sign-box-form-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.signinEmail,expression:"signinEmail"}],class:"signinE"===s.warning?"warning":"normalSigninE"===s.warning?"normal":"",attrs:{type:"email",name:"",placeholder:"Email"},domProps:{value:s.signinEmail},on:{input:[function(n){n.target.composing||(s.signinEmail=n.target.value)},s.checkSignEmail]}})]),s._v(" "),i("div",{staticClass:"sign-box-form-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.forgetCode,expression:"forgetCode"}],staticClass:"code",class:"code"===s.warning?"warning":"normalCode"===s.warning?"normal":"",attrs:{type:"text",name:"",placeholder:"Type the code"},domProps:{value:s.forgetCode},on:{input:[function(n){n.target.composing||(s.forgetCode=n.target.value)},s.checkCode]}}),s._v(" "),i("span",{class:{"sign-box-form-code-btn":!0,disabe:s.signinEmail&&"signinE"!==s.warning&&!s.click},on:{click:s.sendEmail}},[s._v("send")])]),s._v(" "),i("div",{staticClass:"sign-box-form-warning signup"},["signinE"===s.warning||"code"===s.warning?i("p",[i("span",{staticClass:"sign-box-form-warning-icon"},[i("icon-svg",{attrs:{"icon-class":"warning"}})],1),s._v(" "),"signinE"===s.warning?i("span",{staticClass:"sign-box-form-warning-text"},[s._v("Invalid email address")]):s._e(),s._v(" "),"code"===s.warning?i("span",{staticClass:"sign-box-form-warning-text"},[s._v("Incorrect code")]):s._e()]):s._e()])]):s._e(),s._v(" "),3===s.state?i("div",{staticClass:"sign-box-form"},[i("div",{staticClass:"sign-box-form-input"},["checkbox"==(s.eye?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:s.resetPassword,expression:"resetPassword"}],class:"forget"===s.warning?"warning":"normalForget"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:"checkbox"},domProps:{checked:Array.isArray(s.resetPassword)?s._i(s.resetPassword,null)>-1:s.resetPassword},on:{input:function(n){s.checkPassword(2)},change:function(n){var i=s.resetPassword,a=n.target,e=!!a.checked;if(Array.isArray(i)){var t=s._i(i,null);a.checked?t<0&&(s.resetPassword=i.concat([null])):t>-1&&(s.resetPassword=i.slice(0,t).concat(i.slice(t+1)))}else s.resetPassword=e}}}):"radio"==(s.eye?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:s.resetPassword,expression:"resetPassword"}],class:"forget"===s.warning?"warning":"normalForget"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:"radio"},domProps:{checked:s._q(s.resetPassword,null)},on:{input:function(n){s.checkPassword(2)},change:function(n){s.resetPassword=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:s.resetPassword,expression:"resetPassword"}],class:"forget"===s.warning?"warning":"normalForget"===s.warning?"normal":"",attrs:{name:"",placeholder:"Password",type:s.eye?"text":"password"},domProps:{value:s.resetPassword},on:{input:[function(n){n.target.composing||(s.resetPassword=n.target.value)},function(n){s.checkPassword(2)}]}}),s._v(" "),i("span",{staticClass:"sign-box-form-input-icon",on:{click:function(n){s.eye=!s.eye}}},[i("icon-svg",{attrs:{"icon-class":s.eye?"eye":"no-eye"}})],1)]),s._v(" "),i("div",{staticClass:"sign-box-form-warning signup"},["password"===s.warning?i("p",[i("span",{staticClass:"sign-box-form-warning-icon"},[i("icon-svg",{attrs:{"icon-class":"warning"}})],1),s._v(" "),i("span",{staticClass:"sign-box-form-warning-text"},[s._v("Please use 6+ characters")])]):s._e()])]):s._e(),s._v(" "),0===s.state?i("div",{staticClass:"sign-box-signin"},[i("p",{staticClass:"sign-box-signin-text"},[s._v("Already have an account? ")]),s._v(" "),i("button",{staticClass:"sign-box-signin-btn",on:{click:function(n){s.reset(1)}}},[s._v("Sign in.")])]):s._e(),s._v(" "),i("div",{staticClass:"sign-box-btn"},[0===s.state?i("button",{on:{click:s.signup}},[s._v("Register")]):1===s.state?i("button",{on:{click:s.signin}},[s._v("Sign in")]):2===s.state?i("button",{class:{marginBtn:!0,disable:!s.forgetCode||!s.signinEmail||"signinE"===s.warning||"code"===s.warning},on:{click:s.toReset}},[s._v("Next")]):3===s.state?i("button",{class:{marginBtn:!0,disable:!s.signinEmail||"signinE"===s.warning},on:{click:s.resetPass}},[s._v("Reset password")]):s._e()]),s._v(" "),0===s.state?i("div",{staticClass:"sign-box-footer"},[i("p",[s._v("By creating an account，you agree with our ")]),s._v(" "),i("router-link",{attrs:{to:"/terms"}},[s._v("Terms of Service")]),s._v(" "),i("p",[s._v(" and ")]),s._v(" "),i("router-link",{attrs:{to:"/privacy"}},[s._v("Privacy Policy")]),s._v(" "),i("p",[s._v(".")])],1):s._e(),s._v(" "),1===s.state?i("div",{staticClass:"sign-box-footer"},[i("p",[s._v("Don't have an account?")]),s._v(" "),i("br"),s._v(" "),i("button",{staticClass:"sign-box-signin-btn",on:{click:function(n){s.reset(0)}}},[s._v("Create new account")])]):s._e(),s._v(" "),2===s.state||3===s.state?i("div",{staticClass:"sign-box-help"},[s._m(0)]):s._e()],1)])},staticRenderFns:[function(){var s=this.$createElement,n=this._self._c||s;return n("p",[this._v("Please contact "),n("a",{attrs:{href:"mailto:markone_support@163.com?subject=Feedback%20for%20Mark%20One"}},[this._v("markone_support@163.com")]),this._v(" for help if necessary.")])}]};var c=i("VU/8")(o,r,!1,function(s){i("ZukU")},"data-v-a455a5f6",null);n.default=c.exports}});